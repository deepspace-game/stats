<html>
<head>
<title>DEEPSPACE (DPS) Ship NFT Stats Client</title>
<meta http-equiv="Pragma" content="no-cache">
<base target="_blank">
<style>
table, th, td {
  border: 2px solid black;
  border-collapse: collapse;
}
</style>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
	let xhr = new XMLHttpRequest();
	xhr.open('GET', "https://stats.deepspace.game/api");
	xhr.send();

	var respond;
	var lastUpdated = "";
  var shipLevel1 = "";
  var shipLevel2 = "";
  var shipLevel3 = "";
  var shipLevel4 = "";
  var shipLevel5 = "";
  var totalShips = "";
  var shipsLost = "";
	var shipspecstats = "";
	var shipstats100 = "";
	var shipstats1 = "";
	var totalPlayers = "";
	var topMintersList = "";
	var topShipsList = "";
	var stakingPools = "";
	var totalShipsStaked = "";
	var circulatingSupply = "";
	
	largeFormat = d3.format(",.0f");
	largeFormatDecimal = d3.format(",.2f");
	largeFormatPercentage = d3.format(",.4f");
	
	xhr.onreadystatechange = function() {
		if (xhr.readyState === 4) {
		  var data = xhr.response;
		  tokenData = JSON.parse(data);
		  console.log(tokenData);
						
		  shipLevel1 = tokenData["ship_rating_1_minted"];
		  document.getElementById('shipLevel1').innerHTML = "Ship Rating 1 Mints: " + largeFormat(shipLevel1);
      
		  shipLevel2 = tokenData["ship_rating_2_minted"];
		  document.getElementById('shipLevel2').innerHTML = "Ship Rating 2 Mints: " + largeFormat(shipLevel2);
      
  		shipLevel3 = tokenData["ship_rating_3_minted"];
		  document.getElementById('shipLevel3').innerHTML = "Ship Rating 3 Mints: " + largeFormat(shipLevel3);
      
  		shipLevel4 = tokenData["ship_rating_4_minted"];
		  document.getElementById('shipLevel4').innerHTML = "Ship Rating 4 Mints: " + largeFormat(shipLevel4);
      
  	  shipLevel5 = tokenData["ship_rating_5_minted"];
		  document.getElementById('shipLevel5').innerHTML = "Ship Rating 5 Mints: " + largeFormat(shipLevel5);
      
  		totalShips = tokenData["total_ships_minted"];
		  document.getElementById('totalShips').innerHTML = "Total Ships Built: " + largeFormat(totalShips);
			
  		shipsLost = tokenData["ships_lost"];
		  document.getElementById('shipsLost').innerHTML = "Ships Lost: " + largeFormat(shipsLost);
			
  		totalShipsStaked = tokenData["total_ships_staked"];
		  document.getElementById('totalShipsStaked').innerHTML = "Total Ships Staked: " + largeFormat(totalShipsStaked);
			
  		circulatingSupply = tokenData["circulating_supply"];
		  document.getElementById('circulatingSupply').innerHTML = "Circulating Supply: " + largeFormat(circulatingSupply);
			
 		shipSpecsCounts = tokenData["ship_spec_stat_counts"];
		shipwith100stat = shipSpecsCounts["ships_with_100_stat"];
		shipwith1stat = shipSpecsCounts["ships_with_1_stat"];
		 document.getElementById('shipSpecs100').innerHTML = "Ships with at least one stat as 100: " + largeFormat(shipwith100stat);
		document.getElementById('shipSpecs1').innerHTML = "Ships with at least one stat as 1: " + largeFormat(shipwith1stat);
			
		  topMintersList = tokenData["top_minters"];
		  document.getElementById('topMintersList').innerHTML = "Top " + topMintersList.length +  " Minters:<br>";


  // creates a <table> element and a <tbody> element
  var tbl = document.createElement("table");
  var tblBody = document.createElement("tbody");
  
    var row = document.createElement("tr");
    var cell = document.createElement("td");
    var cellText = document.createTextNode("Position:");
      cell.appendChild(cellText);
row.appendChild(cell);
			
	cell = document.createElement("td");
      cellText = document.createTextNode("Wallet Address:");
      cell.appendChild(cellText);
row.appendChild(cell);
			
    cell = document.createElement("td");    
	cellText = document.createTextNode("Total Ship Mints:");
      cell.appendChild(cellText);
      row.appendChild(cell);
	  
    // add the row to the end of the table body
    tblBody.appendChild(row);
  
  var y = 0;
		  for (let i = 0; i < topMintersList.length; i++) {
		  y++;
		  	minterId = topMintersList[i]["minter_id"];
		  	numMinted = topMintersList[i]["num_minted"];
			walletLink = "https://bscscan.com/token/0xf275e1AC303a4C9D987a2c48b8E555A77FeC3F1C?a=";
			 			
    // creates a table row
    row = document.createElement("tr");
    cell = document.createElement("td");
    cellText = document.createTextNode(y);
      cell.appendChild(cellText);
row.appendChild(cell);
			  
    cell = document.createElement("td");
	 cellText = document.createTextNode(minterId);
      cell.appendChild(cellText);
row.appendChild(cell);
			  
    cell = document.createElement("td");
      cellText = document.createTextNode(numMinted);
      cell.appendChild(cellText);
      row.appendChild(cell);
	  
    // add the row to the end of the table body
    tblBody.appendChild(row);
    }
		
  // put the <tbody> in the <table>
  tbl.appendChild(tblBody);
  // appends <table> into <body>
  document.getElementById('topMintersList').appendChild(tbl);
  // sets the border attribute of tbl to 2;
  tbl.setAttribute("border", "2");
		
			
		  topShipsList = tokenData["top_ships"];
		  document.getElementById('topShipsListTitle').innerHTML = "Top " + topShipsList.length +  " Ships:<br>";

var table = document.getElementById("topShipsList");

var rowH = table.insertRow();

var cellH1 = rowH.insertCell();  
var cellH2 = rowH.insertCell();
var cellH3 = rowH.insertCell();
var cellH4 = rowH.insertCell();
var cellH5 = rowH.insertCell();
var cellH6 = rowH.insertCell();
var cellH7 = rowH.insertCell();
var cellH8 = rowH.insertCell();
var cellH9 = rowH.insertCell();
var cellH10 = rowH.insertCell();
var cellH11 = rowH.insertCell();
var cellH12 = rowH.insertCell();
var cellH13 = rowH.insertCell();
var cellH14 = rowH.insertCell();
 
cellH1.innerHTML = "Position:";
cellH2.innerHTML = "Ship Address:";
cellH3.innerHTML = "Owner Address:";
cellH4.innerHTML = "Ship Class:";
cellH5.innerHTML = "Ship Rating:";
cellH6.innerHTML = "Ship Total Stats:";
cellH7.innerHTML = "Attack:";
cellH8.innerHTML = "Shields:";
cellH9.innerHTML = "Speed:";
cellH10.innerHTML = "Mining:";
cellH11.innerHTML = "Luck:";
cellH12.innerHTML = "Special Attack:";
cellH13.innerHTML = "Special Defense:";
cellH14.innerHTML = "Max Health:";  
		
  var y = 0;
		  for (let i = 0; i < topShipsList.length; i++) {
		  y++;
		  	shipId = topShipsList[i]["ship_id"];
			shipIdOnly = shipId.split('-')[1]
		  	ownerId = topShipsList[i]["ship_owner_id"];
			level = topShipsList[i]["ship_rating"];
		 	shipClass = topShipsList[i]["ship_class"];
			statsTotal = topShipsList[i]["ship_stats_total"];
			shipAttack = topShipsList[i]["ship_stats"]["attack"];
			shipSpecialAttack = topShipsList[i]["ship_stats"]["special_attack"];
			shipShields = topShipsList[i]["ship_stats"]["shields"];
			shipSpecialDefense = topShipsList[i]["ship_stats"]["special_defense"];
			shipSpeed = topShipsList[i]["ship_stats"]["speed"];
			shipMining = topShipsList[i]["ship_stats"]["mining"];
			shipLuck = topShipsList[i]["ship_stats"]["luck"];
			shipMaxHealth = topShipsList[i]["ship_stats"]["max_health"];

var row = table.insertRow();

var cell1 = row.insertCell();  
var cell2 = row.insertCell();
var cell3 = row.insertCell();
var cell4 = row.insertCell();
var cell5 = row.insertCell();
var cell6 = row.insertCell();
var cell7 = row.insertCell();
var cell8 = row.insertCell();
var cell9 = row.insertCell();
var cell10 = row.insertCell();
var cell11 = row.insertCell();
var cell12 = row.insertCell();
var cell13 = row.insertCell();
var cell14 = row.insertCell();


cell1.innerHTML = y;
cell2.innerHTML = "<a href=\"https://app.deepspace.game/shipLink/" + shipIdOnly + "\">" + shipIdOnly + "</a>";
cell3.innerHTML = ownerId;
cell4.innerHTML = shipClass;
cell5.innerHTML = level;
cell6.innerHTML = statsTotal;
cell7.innerHTML = shipAttack;
cell8.innerHTML = shipShields;
cell9.innerHTML = shipSpeed;
cell10.innerHTML = shipMining;
cell11.innerHTML = shipLuck;
cell12.innerHTML = shipSpecialAttack;
cell13.innerHTML = shipSpecialDefense;
cell14.innerHTML = shipMaxHealth;  
	

			  
}

////////////////////
			
		  stakingPools = tokenData["staking_pools"];
		  document.getElementById('stakingPools').innerHTML = "Staking Pools:<br>";


  // creates a <table> element and a <tbody> element
  tbl = document.createElement("table");
  tblBody = document.createElement("tbody");
  
    row = document.createElement("tr");
    cell = document.createElement("td");
    cellText = document.createTextNode("Pool Name:");
      cell.appendChild(cellText);
row.appendChild(cell);
			
	cell = document.createElement("td");
      cellText = document.createTextNode("Min Stars:");
      cell.appendChild(cellText);
row.appendChild(cell);
			
    cell = document.createElement("td");    
	cellText = document.createTextNode("Max Stars:");
      cell.appendChild(cellText);
      row.appendChild(cell);
		      
    cell = document.createElement("td");    
	cellText = document.createTextNode("Loss Chance:");
      cell.appendChild(cellText);
      row.appendChild(cell);
			
    cell = document.createElement("td");    
	cellText = document.createTextNode("Luck Factor:");
      cell.appendChild(cellText);
      row.appendChild(cell);
			
    cell = document.createElement("td");    
	cellText = document.createTextNode("Entry Fee:");
      cell.appendChild(cellText);
      row.appendChild(cell);
			
    cell = document.createElement("td");    
	cellText = document.createTextNode("Exit Fee:");
      cell.appendChild(cellText);
      row.appendChild(cell);
			
    cell = document.createElement("td");    
	cellText = document.createTextNode("Number of Ships:");
      cell.appendChild(cellText);
      row.appendChild(cell);
	  
    cell = document.createElement("td");    
	cellText = document.createTextNode("Allocation Points:");
      cell.appendChild(cellText);
      row.appendChild(cell);
			
    cell = document.createElement("td");    
	cellText = document.createTextNode("Deposit Enabled:");
      cell.appendChild(cellText);
      row.appendChild(cell);
						
    // add the row to the end of the table body
    tblBody.appendChild(row);
  
		  for (let i = 0; i < stakingPools.length; i++) {
		  	poolId = stakingPools[i]["pool_id"];
		  	poolMinStars = stakingPools[i]["pool_min_stars"];
			poolMaxStars = stakingPools[i]["pool_max_stars"];
		 	poolLossChance = stakingPools[i]["pool_loss_chance"];
			poolLuckFactor = stakingPools[i]["pool_luck_factor"];
			poolEntryFee = stakingPools[i]["pool_entry_fee"] + " DPS";
			poolExitFee = stakingPools[i]["pool_exit_fee"] + " DPS";
			poolNumShips = largeFormat(stakingPools[i]["pool_num_ships"]);
			poolAllocPoint = stakingPools[i]["pool_alloc_point"];
			poolDepositEnabled = stakingPools[i]["pool_deposit_enabled"];
			 			
    // creates a table row
    row = document.createElement("tr");
			  
    cell = document.createElement("td");
	 cellText = document.createTextNode(poolId);
      cell.appendChild(cellText);
row.appendChild(cell);
			  
    cell = document.createElement("td");
      cellText = document.createTextNode(poolMinStars);
      cell.appendChild(cellText);
      row.appendChild(cell);
			  
    cell = document.createElement("td");
      cellText = document.createTextNode(poolMaxStars);
      cell.appendChild(cellText);
      row.appendChild(cell);
			  
			  
    cell = document.createElement("td");
      cellText = document.createTextNode(poolLossChance);
      cell.appendChild(cellText);
      row.appendChild(cell);
			  
    cell = document.createElement("td");
      cellText = document.createTextNode(poolLuckFactor);
      cell.appendChild(cellText);
      row.appendChild(cell);
			  
    cell = document.createElement("td");
      cellText = document.createTextNode(poolEntryFee);
      cell.appendChild(cellText);
      row.appendChild(cell);
			  
    cell = document.createElement("td");
      cellText = document.createTextNode(poolExitFee);
      cell.appendChild(cellText);
      row.appendChild(cell);
			  
    cell = document.createElement("td");
      cellText = document.createTextNode(poolNumShips);
      cell.appendChild(cellText);
      row.appendChild(cell);
		  
    cell = document.createElement("td");
      cellText = document.createTextNode(poolAllocPoint);
      cell.appendChild(cellText);
      row.appendChild(cell);
	  

    cell = document.createElement("td");
      cellText = document.createTextNode(poolDepositEnabled);
      cell.appendChild(cellText);
      row.appendChild(cell);  
			  
    // add the row to the end of the table body
    tblBody.appendChild(row);
    }
		
  // put the <tbody> in the <table>
  tbl.appendChild(tblBody);
  // appends <table> into <body>
  document.getElementById('stakingPools').appendChild(tbl);
  // sets the border attribute of tbl to 2;
  tbl.setAttribute("border", "2");
	
		  lastUpdated = tokenData["last_updated"];
		  document.getElementById('lastUpdated').innerHTML = "Last Updated: " + lastUpdated;
		
			
////
			
		  recentPurchases = tokenData["recent_purchases"];
		  document.getElementById('recentPurchasesTitle').innerHTML = "" + recentPurchases.length +  " Most Recent Purchased Ships:<br>";

var table = document.getElementById("recentPurchases");

var rowH = table.insertRow();

var cellH1 = rowH.insertCell();  
var cellH2 = rowH.insertCell();
var cellH3 = rowH.insertCell();
var cellH4 = rowH.insertCell();
var cellH5 = rowH.insertCell();
var cellH6 = rowH.insertCell();
var cellH7 = rowH.insertCell();
var cellH8 = rowH.insertCell();
 
cellH1.innerHTML = "Purchase Id:";
cellH2.innerHTML = "Buyer:";
cellH3.innerHTML = "Seller:";
cellH4.innerHTML = "Fee:";
cellH5.innerHTML = "Price:";
cellH6.innerHTML = "Token Address:";
cellH7.innerHTML = "Token Id:";
cellH8.innerHTML = "Purchase Date:";
		
		  for (let i = 0; i < recentPurchases.length; i++) {
		  	purchaseId = recentPurchases[i]["purchase_id"];
		  	purchaseBuyer = recentPurchases[i]["buyer"];
			purchaseSeller = recentPurchases[i]["seller"];
		 	purchaseFee = largeFormat(recentPurchases[i]["fee"]) + " DPS";
			purchasePrice = largeFormat(recentPurchases[i]["price"]) + " DPS";
			purchaseTokenAddress = recentPurchases[i]["token_address"];
			purchaseTokenId = recentPurchases[i]["token_id"];
			purchaseDate = new Date(recentPurchases[i]["purchase_date"]).toLocaleString();
			  
var row = table.insertRow();

var cell1 = row.insertCell();
var cell2 = row.insertCell();
var cell3 = row.insertCell();
var cell4 = row.insertCell();
var cell5 = row.insertCell();
var cell6 = row.insertCell();
var cell7 = row.insertCell();
var cell8 = row.insertCell();

cell1.innerHTML = purchaseId;
cell2.innerHTML = "<a href=\"https://bscscan.com/token/0xf275e1AC303a4C9D987a2c48b8E555A77FeC3F1C?a=" + purchaseBuyer + "\">" + purchaseBuyer + "</a>";
cell3.innerHTML = "<a href=\"https://bscscan.com/token/0xf275e1AC303a4C9D987a2c48b8E555A77FeC3F1C?a=" + purchaseSeller + "\">" + purchaseSeller + "</a>";
cell4.innerHTML = purchaseFee;
cell5.innerHTML = purchasePrice;
cell6.innerHTML = purchaseTokenAddress;
cell7.innerHTML = "<a href=\"https://app.deepspace.game/shipLink/" + purchaseTokenId + "\">" + purchaseTokenId + "</a>";
cell8.innerHTML = purchaseDate;
			  
}
			
			
		}
	}
			
</script>
</head>
<body>
<h1>DEEPSPACE (DPS) Ships NFT Client Stats</h1>
<h2>About DEEPSPACE</h2>
<p><b>Welcome to the DEEPSPACE Metaverse!</b><br/>
DEEPSPACE is a Play-to-Earn space multiverse exploration strategy game!<br/>
Earn passive income from holding $DPS, trading NFTs, and taking risks as you explore DEEPSPACE with your fleet of ships!<br/>
Prepare to explore, harvest, and fight your way through the DEEPSPACE universe!<br/>
Learn more at: <a href="https://deepspace.game">https://deepspace.game</a><br/>
Buy DEEPSPACE (DPS) at: <a href="https://app.deepspace.game">https://app.deepspace.game</a></br>
Mint/Buy/Sell/Trade Ships on the DEEPSPACE App at: <a href="https://app.deepspace.game">https://app.deepspace.game</a>
</p>
	
<p><i>Tip: Check the console log for the full JSON response from the token stat server</i></p>
<p>Pro Tip: DEEPSPACE (DPS) Ships NFTs API Endpoint: <a href="https://stats.deepspace.game/api">https://stats.deepspace.game/api</a></p>
<br/>
<br><div id="totalShips">Total Ships Built: N/A</div>
<br><div id="shipsLost">Ships Lost: N/A</div>
<br><div id="totalShipsStaked">Total Ships Staked: N/A</div>
<br><div id="circulatingSupply">Circulating Supply: N/A</div>
<br><div id="shipLevel1">Ship Rating 1 Mints: N/A</div>
<br><div id="shipLevel2">Ship Rating 2 Mints: N/A</div>
<br><div id="shipLevel3">Ship Rating 3 Mints: N/A</div>
<br><div id="shipLevel4">Ship Rating 4 Mints: N/A</div>
<br><div id="shipLevel5">Ship Rating 5 Mints: N/A</div>
<br><div id="shipSpecs100">Ships with at least one stat as 100: N/A</div>
<br><div id="shipSpecs1">Ships with at least one stat as 1: N/A</div>
<br><div id="stakingPools">Staking Pools: - N/A</div>
<br><div id="topMintersList">Top Minters List: - N/A</div>
<br><div id="topShipsListTitle">Top Ships List: - N/A</div>
<table id="topShipsList"></table>
<br><div id="recentPurchasesTitle">Recent Purchase List: - N/A</div>
<table id="recentPurchases"></table>
<br><div id="lastUpdated">Last Updated: N/A</div>
</body>
</html>
